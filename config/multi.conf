client_max_body_size 10M;
error_page 400 errors/400.html;
error_page 404 errors/404.html;
error_page 500 errors/500.html;

# All 3 servers on the same port: 8080, but with different hostnames:
#   test1, test2, test3
server {
    listen 8080;
    server_name test1;
    index www/01-pages;
    allow GET POST DELETE;

    location / {
        root www/01-pages;
        index index.html;
        allow GET;
    }

    location /multipart {
        root www/01-pages;
        index message.html;
        allow GET;
    }

    location /upload {
        root www/02-received;
        allow GET POST DELETE;
    }

    location /01-pages/nested {
        root www/01-pages/nested;
    }

    location /cgi-bin {
        root www/cgi-bin;
    }

    location /03-stash {
        root www/03-stash;
        allow GET POST;
    }

    location /google {
        return 301 http://google.com;
    }
}

server {
    listen 8080;
    server_name test2;
    index www/test-server-1;
    allow GET POST DELETE;

    location / {
        root www/test-server-1;
        index index.html;
        allow GET;
    }

    location /special {
        root www/special-content;
        allow GET POST;
    }
}

server {
    listen 8080;
    server_name test3;
    index www/test-server-2;
    allow GET;

    location / {
        root www/test-server-2;
        index index.html;
        allow GET;
    }

    # Different error page for this server
    error_page 404 errors/custom404.html;
}
